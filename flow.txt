1.Write enum 

2.Models

3.dto

4.expense service

5.expense resolver

6.change expense service by import prima.service

7.keep expense resolver unchanged




1Ô∏è‚É£ Install the REQUIRED adapter packages

For PostgreSQL, Prisma 7 uses pg + adapter

pnpm add pg
pnpm add @prisma/adapter-pg


You already have:

@prisma/client@7
prisma@7


Good.

2Ô∏è‚É£ schema.prisma (NO url here ‚Äî this is correct)
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}


‚úÖ NO url
‚úÖ Prisma 7 rule followed

3Ô∏è‚É£ .env (YES, outside src is correct)
DATABASE_URL="postgresql://user:password@localhost:5432/expense_tracker"


‚úî This is correct placement
‚úî NestJS + Prisma both expect it here

4Ô∏è‚É£ FIX PrismaService (THIS IS THE KEY üîë)

This is where everything broke before.

‚úÖ Correct Prisma 7 PrismaService
import { Injectable, OnModuleInit, OnModuleDestroy } from '@nestjs/common'
import { PrismaClient } from '@prisma/client'
import { Pool } from 'pg'
import { PrismaPg } from '@prisma/adapter-pg'

@Injectable()
export class PrismaService
  extends PrismaClient
  implements OnModuleInit, OnModuleDestroy
{
  constructor() {
    const pool = new Pool({
      connectionString: process.env.DATABASE_URL,
    })

    const adapter = new PrismaPg(pool)

    super({
      adapter,
    })
  }

  async onModuleInit() {
    await this.$connect()
  }

  async onModuleDestroy() {
    await this.$disconnect()
  }
}

üî• IMPORTANT

adapter ‚úÖ valid

datasources ‚ùå invalid

datasourceUrl ‚ùå invalid

empty constructor ‚ùå invalid

This is why your app kept crashing.

5Ô∏è‚É£ Prisma migrate (pnpm version)
pnpm prisma generate
pnpm prisma migrate dev --name init

6Ô∏è‚É£ PrismaModule (must be global or imported)



 <----   authendication--->
pnpm add @nestjs/jwt passport passport-jwt bcryptc disconnect


9.create auth(module,service ,resolver)/dto





<----------git hub------->

git init

git add .
